<Window x:Class="Studio_Rent_Service.Pages.Client_Info"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Studio_Rent_Service.Pages"
        mc:Ignorable="d"
        Title="Client_Info" Height="700" Width="1200"
        MinHeight="500" MinWidth="800">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="#2c3e50" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Управление клиентами" 
                          Foreground="White" 
                          FontSize="22" 
                          FontWeight="Bold"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="btnExport" 
                           Content="Экспорт" 
                           Background="#16a085" 
                           Foreground="White"
                           Margin="5,0"
                           Padding="12,5"
                           Click="BtnExport_Click"
                           ToolTip="Экспорт данных в файл"/>
                    <Button x:Name="btnImport" 
                           Content="Импорт" 
                           Background="#3498db" 
                           Foreground="White"
                           Margin="5,0"
                           Padding="12,5"
                           Click="BtnImport_Click"
                           ToolTip="Импорт данных из файла"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Основное содержимое -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" MinWidth="350"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="3*" MinWidth="350"/>
            </Grid.ColumnDefinitions>

            <!-- Левая панель - Форма ввода -->
            <Border Grid.Column="0" 
                   Margin="0,0,10,0" 
                   BorderBrush="#bdc3c7" 
                   BorderThickness="1"
                   CornerRadius="5"
                   Padding="15"
                   Background="#f8f9fa">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Данные клиента" 
                                  FontSize="18" 
                                  FontWeight="Bold" 
                                  Margin="0,0,0,15"
                                  Foreground="#2c3e50"/>

                        <!-- Код клиента -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Код клиента:" Grid.Column="0"/>
                            <TextBox x:Name="txtCode" Grid.Column="1" 
                                    IsReadOnly="True"
                                    Background="#ecf0f1"/>
                        </Grid>

                        <!-- Фамилия -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Фамилия:" Grid.Column="0"/>
                            <TextBox x:Name="txtLastName" Grid.Column="1" 
                                    MaxLength="50"/>
                        </Grid>

                        <!-- Имя -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Имя:" Grid.Column="0"/>
                            <TextBox x:Name="txtFirstName" Grid.Column="1" 
                                    MaxLength="50"/>
                        </Grid>

                        <!-- Отчество -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Отчество:" Grid.Column="0"/>
                            <TextBox x:Name="txtMiddleName" Grid.Column="1" 
                                    MaxLength="50"/>
                        </Grid>

                        <!-- Телефон -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Телефон:" Grid.Column="0"/>
                            <TextBox x:Name="txtPhone" Grid.Column="1" 
                                    MaxLength="20"/>
                        </Grid>

                        <!-- Email -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Email:" Grid.Column="0"/>
                            <TextBox x:Name="txtEmail" Grid.Column="1" 
                                    MaxLength="100"/>
                        </Grid>

                        <!-- Дополнительная информация -->
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Доп. информация:" Grid.Column="0"/>
                            <TextBox x:Name="txtAdditionalInfo" Grid.Column="1" 
                                    Height="60"
                                    MaxLength="500"
                                    TextWrapping="Wrap"
                                    AcceptsReturn="True"
                                    VerticalScrollBarVisibility="Auto"/>
                        </Grid>

                        <!-- Кнопки управления -->
                        <WrapPanel HorizontalAlignment="Center" Margin="0,10,0,0">
                            <Button x:Name="btnAdd" 
                                   Content="➕ Добавить" 
                                   Background="#27ae60" 
                                   Foreground="White"
                                   Click="BtnAdd_Click"
                                   ToolTip="Добавить нового клиента" Margin="0,0,10,0"/>
                            <Button x:Name="btnUpdate" 
                                   Content="✏️ Обновить" 
                                   Background="#2980b9" 
                                   Foreground="White"
                                   Click="BtnUpdate_Click"
                                   ToolTip="Обновить выбранного клиента" Margin="0,0,10,0"/>
                            <Button x:Name="btnDelete" 
                                   Content="🗑️ Удалить" 
                                   Background="#c0392b" 
                                   Foreground="White"
                                   Click="BtnDelete_Click"
                                   ToolTip="Удалить выбранного клиента" Margin="0,0,10,0"/>
                            <Button x:Name="btnClear" 
                                   Content="🗑️ Очистить" 
                                   Background="#7f8c8d" 
                                   Foreground="White"
                                   Click="BtnClear_Click"
                                   ToolTip="Очистить форму"
                                   />
                        </WrapPanel>

                        <!-- Статистика -->
                        <Border Margin="0,20,0,0" 
                               BorderBrush="#bdc3c7" 
                               BorderThickness="0,1,0,0"
                               Padding="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="Статистика" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,5"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock x:Name="txtTotalClients" 
                                              Text="Всего клиентов: 0"
                                              Grid.Column="0"/>
                                    <TextBlock x:Name="txtSelectedClient" 
                                              Text="Выбрано: 0"
                                              Grid.Column="1"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Разделитель -->
            <GridSplitter Grid.Column="1" 
                         Width="5" 
                         HorizontalAlignment="Center" 
                         VerticalAlignment="Stretch"
                         Background="#bdc3c7"
                         ShowsPreview="True"/>

            <!-- Правая панель - Список клиентов -->
            <Border Grid.Column="2" 
                   BorderBrush="#bdc3c7" 
                   BorderThickness="1"
                   CornerRadius="5"
                   Background="#f8f9fa">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Панель поиска и фильтров -->
                    <Border Grid.Row="0" 
                           Background="#ecf0f1" 
                           CornerRadius="3"
                           Margin="10,10,10,5"
                           Padding="10">
                        <StackPanel>
                            <!-- Поиск -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Поиск:" 
                                          Grid.Column="0" 
                                          Margin="0,0,10,0"
                                          VerticalAlignment="Center"/>
                                <TextBox x:Name="txtSearch" 
                                        Grid.Column="1" 
                                        TextChanged="TxtSearch_TextChanged"
                                        ToolTip="Поиск по ФИО, телефону или email"/>
                                <Button x:Name="btnSearchClear" 
                                       Grid.Column="2" 
                                       Content="✕" 
                                       Margin="5,0,0,0"
                                       Width="30"
                                       Click="BtnSearchClear_Click"
                                       ToolTip="Очистить поиск"/>
                            </Grid>

                            <!-- Фильтры -->
                            <WrapPanel Margin="0,10,0,0" HorizontalAlignment="Center">
                                <TextBlock Text="Фильтр:" 
                                          Margin="0,0,10,0"
                                          VerticalAlignment="Center"/>
                                <RadioButton x:Name="rbFilterAll" 
                                            Content="Все" 
                                            GroupName="Filter"
                                            IsChecked="True"
                                            Margin="5"
                                            Checked="Filter_Checked"/>
                                <RadioButton x:Name="rbFilterWithPhone" 
                                            Content="С телефоном" 
                                            GroupName="Filter"
                                            Margin="5"
                                            Checked="Filter_Checked"/>
                                <RadioButton x:Name="rbFilterWithEmail" 
                                            Content="С email" 
                                            GroupName="Filter"
                                            Margin="5"
                                            Checked="Filter_Checked"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>

                    <!-- DataGrid с клиентами -->
                    <DataGrid x:Name="dgClients" 
                             Grid.Row="1" 
                             Margin="10,5,10,10"
                             SelectionChanged="DgClients_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Код" 
                                               Binding="{Binding Code}" 
                                               Width="60"/>
                            <DataGridTextColumn Header="ФИО" 
                                               Binding="{Binding FullName}" 
                                               Width="*" MinWidth="150"/>
                            <DataGridTextColumn Header="Телефон" 
                                               Binding="{Binding Phone}" 
                                               Width="120"/>
                            <DataGridTextColumn Header="Email" 
                                               Binding="{Binding Email}" 
                                               Width="150"/>
                            <DataGridTemplateColumn Header="Действия" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Button Content="✏️" 
                                                   Click="BtnEdit_Click"
                                                   Tag="{Binding Code}"
                                                   ToolTip="Редактировать"/>
                                            <Button Content="🗑️"
                                                   Click="BtnDeleteRow_Click"
                                                   Tag="{Binding Code}"
                                                   ToolTip="Удалить"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>
        </Grid>

        <!-- Статус бар -->
        <StatusBar Grid.Row="2" Background="#ecf0f1">
            <StatusBarItem>
                <TextBlock x:Name="txtStatus" Text="Готово"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock Text="|"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock x:Name="txtFilterStatus" Text="Фильтр: Все"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding ElementName=dgClients, Path=Items.Count, StringFormat='Показано: {0}'}"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
